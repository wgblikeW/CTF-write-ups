FROM golang:alpine
RUN apk add build-base

WORKDIR /server

COPY ./gomod .
COPY ./go.sum .
RUN go mod download

COPY ./server/. .
COPY ./main.go .

ENV IPADDR "0.0.0.0"
ENV PORT ":8080"
ENV PRIVATEKEY "39427da620b7160f49769a02f7c6d2ed39e03a58d759fad95e67cf699c21aa01"
ENV GX "107625067359437241239344899138921365748619940315243690528003569364880084637404"
ENV GY "20687541247134308299048075675354430477260379050260910133661906751890213440220"
ENV SESSION_KEY "a585d69436358bad3ff56be544cc016072ec99e2d8e5f7c70ca495fcad1e509d"
ENV P_C_hex "b5b1b07d251b299844d968be56284ef32dffd0baa6a0353baf10c90298dfd117ea62978d102a76c3d6747e283091ac5f2b4c3ba5fc7a906fe023ee3bc61b50fe"

EXPOSE 8080

CMD ["/abusedkeyserver"]